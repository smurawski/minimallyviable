{{- if .Site.Params.widgets.upcoming_events -}}
<div class="widget">
	<header>
		<span class="widget-header"><span class="fa fa-calendar"></span> Upcoming Events</span>
	</header>
	<a class="widget-header-small button" href="webcal://{{ replace (replace $.Site.BaseURL "https://" "") "http://" ""}}index.ics"><span class="fa fa-calendar-plus-o"></span> Subscribe with iCal</a>
	<ul>
		{{- range first 5 (sort (where $.Site.Data.events "endDatetime" "gt" now) "startDatetime" "asc") -}}
		<li itemscope itemtype="http://schema.org/Event">
      <h6 itemprop="name">{{ .name }}</h6>
			<time datetime="{{ dateFormat "2006-01-02T15:04:05" .startDatetime }}" content="{{ dateFormat "2006-01-02T15:04:05" .startDatetime }}" itemprop="startDate">{{ dateFormat "2006/01/02 @ 15:04" .startDatetime }}</time>
			-
			<time datetime="{{ dateFormat "2006-01-02T15:04:05" .endDatetime }}" content="{{ dateFormat "2006-01-02T15:04:05" .endDatetime }}" itemprop="endDate">{{ dateFormat "2006/01/02 @ 15:04" .endDatetime }}</time>
      <br/><span itemprop="about">{{ .description }}</span>
    </li>
		{{- end -}}
	</ul>
</div>
{{- end -}}
